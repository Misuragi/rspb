template(name='layout')
	+menu
	+yield

template(name='menu')
	.navbar-fixed: nav.teal: .nav-wrapper
		ul.left
			li: a Home
		a.brand-logo.center RSPB
		ul.right
			li: a Login
	ul.fixed.side-nav.z-depth-2
		li.grey.lighten-2: a.center: b Menu Admin
		each menus
			li: a.waves-effect.waves-teal(href='/{{name}}')
				span: b= full
				i.material-icons.right#sideIcon(class='{{color}}-text')= icon

template(name='home'): .container
	h4 Beranda

template(name='loading'): .container
	.progress.center: .indeterminate

template(name='pasien'): .container
	h5 Daftar Nama Pasien
	.row
		.col.m6
			.input-field: input#search(value= search)
		.col.m6
			if showButton
				.right.btn#showForm Tambah
			if formDoc
				a.btn.modal-trigger(href='#preview') Preview

	if showForm
		+quickForm(
			collection= coll.pasien
			schema= schema
			type= formType
			id = 'formPasien'
			scope = 'rawat'
			doc= pasiens
			buttonContent = 'simpan'
		)
	unless currentMR
		table
			thead
				tr
					th No MR
					th Nama
					th Alamat
					th Jenis Kelamin
					th Tgl Lahir
			tbody
				each pasiens
					tr#row
						td= no_mr
						td= regis.nama_lengkap
						td= regis.alamat
						td {{look 'kelamin' regis.kelamin}}
						td= hari(regis.tgl_lahir)
		+import
		if routeIs 'bayar'
			h5 Daftar Bayar
			table.bordered
				thead
					tr
						th No MR
						th Nama
						th Tanggal
						th Total Biaya
						th Cara Bayar
						th Status Bayar
						th Aksi
				tbody
					each pasien in pasiens
						each item in pasien.rawat
							unless item.status_bayar
								tr
									td= pasien.no_mr
									td= pasien.regis.nama_lengkap
									td= hari(item.tanggal)
									td= item.total.semua
									td {{look 'cara_bayar' item.cara_bayar 'label'}}
									if item.status_bayar
										td Sudah
									else
										td Belum
									td
										a#bayar(
											pasien= pasien.no_mr
											idbayar= item.idbayar
										) Bayar
		if routeIs 'labor'
			h5 Daftar Request Labor
			table.bordered
				thead
					tr
						th No. MR
						th Pasien
						th Grup
						th Order
						th Normal
						th Satuan
						th Aksi
				tbody
					each pasien in pasiens
						each item in pasien.rawat
							if item.status_bayar
								if item.labor
									each labor in item.labor
										unless labor.hasil
											tr
												td= pasien.no_mr
												td= pasien.regis.nama_lengkap
												td {{look 'labor' labor.nama 'grup'}}
												td {{look 'labor' labor.nama 'label'}}
												td {{look 'labor' labor.nama 'normal'}}
												td {{look 'labor' labor.nama 'satuan'}}
												td
													a#request(
														pasien= pasien.no_mr
														idbayar= item.idbayar
														jenis= 'labor'
														idjenis= labor.idlabor
													) Isi
		if routeIs 'radio'
			h5 Daftar Request Radiologi
			table.bordered
				thead
					tr
						th No. MR
						th Pasien
						th Order
						th Aksi
				tbody
					each pasien in pasiens
						each item in pasien.rawat
							if item.status_bayar
								if item.radio
									each radio in item.radio
										unless radio.hasil
											tr
												td= pasien.no_mr
												td= pasien.regis.nama_lengkap
												td= radio.nama
												td
													a#request(
														pasien= pasien.no_mr
														idbayar= item.idbayar
														jenis = 'radio'
														idjenis= radio.idradio
													) Aksi
		if routeIs 'obat'
			h5 Daftar Request Obat
			table.bordered
				thead
					tr
						th No. MR
						th Pasien
						th Nama Obat
						th Kali
						th Dosis
						th Bentuk
						th Jumlah
						th Serah
				tbody
					each pasien in pasiens
						each item in pasien.rawat
							if item.status_bayar
								if item.obat
									each obat in item.obat
										unless obat.hasil
											tr
												td= pasien.no_mr
												td= pasien.regis.nama_lengkap
												td= obat.nama
												td= obat.aturan.kali
												td= obat.aturan.dosis
												td {{look 'bentuk' obat.aturan.bentuk 'label'}}
												td= obat.jumlah
												td
													a#request(
														pasien= pasien.no_mr
														idbayar= item.idbayar
														jenis = 'obat'
														idjenis= obat.idobat
													) Serah
	if currentMR
		with pasiens
			.left.purple.btn#card Cetak
			table
				tr
					th No MR
					td= no_mr
				tr
					th Nama Lengkap
					td= regis.nama_lengkap
				tr
					th Tanggal Lahir
					td= hari(regis.tgl_lahir)
				tr
					th Tempat Lahir
					td= regis.tmpt_lahir
				tr
					th Umur
					td= umur(regis.tgl_lahir)
			.right.orange.btn#close Tutup
			if rawat
				table
					thead
						tr
							th Tanggal
							th Klinik
							th Cara Bayar
							th Status Bayar
							th Lihat
					tbody
						each rawat
							tr
								td= hari(tanggal)
								td {{look 'klinik' klinik 'label'}}
								td {{look 'cara_bayar' cara_bayar 'label'}}
								if status_bayar
									td Sudah
								else
									td Belum
								td: a.modal-trigger(href='#preview') Lihat
	with formDoc
		.modal#preview
			.modal-content
				table
					tr
						th Tanggal
						td= hari(tanggal)
						th Cara Bayar
						td {{look 'cara_bayar' cara_bayar 'label'}}
						th Klinik
						td {{look 'klinik' klinik 'label'}}
				if tindakan
					table
						thead
							tr
								th Diagnosa
								th Tindakan
								th Dokter
								th Harga
						tbody
							each tindakan
								tr
									td= diagnosa
									td {{look 'tindakan' nama 'label'}}
									td {{look 'dokter' dokter 'label'}}
									td= rupiah(harga)
				if labor
					table
						thead
							tr
								th Grup
								th Order
								th Normal
								th Satuan
								th Hasil
						tbody
							each labor
								tr
									td {{look 'labor' nama 'grup'}}
									td {{look 'labor' nama 'label'}}
									td {{look 'labor' nama 'normal'}}
									td {{look 'labor' nama 'satuan'}}
									td= hasil
				if obat
					table
						thead
							tr
								th Nama
								th Dosis
								th Bentuk
								th Kali
								th Jumlah
						tbody
							each obat
								tr
									td {{look 'obat' nama 'label'}}
									td= aturan.dosis
									td {{look 'bentuk' aturan.bentuk 'label'}}
									td= aturan.kali
									td= jumlah
				if radio
					table
						thead
							tr
								th Order
								th Arsip
						tbody
							each radio
								tr
									td {{look 'radio' nama 'label'}}
									td= hasil
				with total
					table
						tr
							if tindakan
								th Total Tindakan
								td= rupiah(tindakan)
							if labor
								th Total Labor
								td= rupiah(labor)
							if radio
								th Total Radio
								td= rupiah(radio)
							if obat
								th Total Obat
								td= rupiah(obat)
							if semua
								th Total Semua
								td= rupiah(semua)

template(name='import')
	.file-field.input-field
		.btn.left
			span Impor Data
			input(type='file' name='upload')
		.file-path-wrapper
			input.file-path.wrapper(type='text')

template(name='gudang'): .container
	h5 Daftar Barang Gudang
	.row
		.col.m8
			.input-field: input#search(value= search)
		.col.m4
			.right.btn#showForm Tambah
	if showForm
		+quickForm(
			collection= coll.gudang
			schema= schema
			id = 'formGudang'
			type = 'insert'
		)
	table
		thead
			tr
				th ID Batch
				th Masuk
				th Kadaluarsa
				th ID Obat
				th Nama
				th Jenis
				th Qty
				th Satuan
				th Beli
				th Jual
				th Suplier
		tbody
			each gudangs
				tr
					td= idbatch
					td= hari(masuk)
					td= hari(kadaluarsa)
					td= idobat
					td= nama
					td= jenis
					td= kuantitas
					td= satuan
					td= rupiah(beli)
					td= rupiah(jual)
					td= suplier