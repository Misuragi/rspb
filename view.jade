template(name='layout')
	+menu
	+yield

template(name='menu')
	.navbar-fixed: nav.teal: .nav-wrapper
		ul.left
			li: a Home
		a.brand-logo.center RSPB
		ul.right
			li: a Login
	ul.fixed.side-nav.z-depth-2
		li.grey.lighten-2: a.center: b Menu Admin
		each menus
			li: a.waves-effect.waves-teal(href='/{{name}}')
				span: b= full
				i.material-icons.right#sideIcon(class='{{color}}-text')= icon

template(name='home'): .container
	h4 Beranda

template(name='loading'): .container
	.progress.center: .indeterminate

template(name='modul'): .container
	h5 Daftar Nama Pasien
	.row
		.col.m6
			.input-field: input#search(value= search)
		.col.m6
			if showButton
				.right.btn#addPasien Tambah
			if formDoc
				a.btn.modal-trigger(href='#preview') Preview

	if addPasien
		+quickForm(
			collection= coll
			schema= schema
			type= formType
			id = 'formPasien'
			scope= route
			doc= pasiens
		)
	unless currentMR
		table
			thead
				tr
					th No MR
					th Nama
					th Alamat
					th Jenis Kelamin
					th Tgl Lahir
			tbody
				each pasiens
					tr#row
						td= no_mr
						td= regis.nama_lengkap
						td= regis.alamat
						td {{look 'kelamin' regis.kelamin}}
						td= hari(regis.tgl_lahir)
		+import
		if routeIs 'bayar'
			h5 Daftar Bayar
			table.bordered
				thead
					tr
						th No MR
						th Nama
						th Tanggal
						th Klinik
						th Dokter
						th Tindakan
						th Total Biaya
						th Cara Bayar
						th Status Bayar
						th Aksi
				tbody
					each pasien in pasiens
						each item in pasien.jalan
							unless item.status_bayar
								tr
									td= pasien.no_mr
									td= pasien.regis.nama_lengkap
									td= hari(item.tanggal)
									td {{look 'klinik' item.klinik 'label'}}
									td= item.dokter
									td= item.tindakan
									td= item.total.semua
									td {{look 'cara_bayar' item.cara_bayar 'label'}}
									td= item.status_bayar
									td
										a#bayar(
											pasien= pasien.no_mr
											idbayar= item.idbayar
										) Bayar
		if routeIs 'apotek'
			h5 Daftar Request Obat
			table.bordered
				thead
					tr
						th No. MR
						th Pasien
						th Nama Obat
						th Kali
						th Dosis
						th Bentuk
						th Jumlah
						th Serah
				tbody
					each pasien in pasiens
						each item in pasien.jalan
							if item.status_bayar
								if item.obat
									each obat in item.obat
										unless obat.hasil
											tr
												td= pasien.no_mr
												td= pasien.regis.nama_lengkap
												td= obat.nama
												td= obat.aturan.kali
												td= obat.aturan.dosis
												td= obat.aturan.bentuk
												td= obat.jumlah
												td
													a#request(
														pasien= pasien.no_mr
														idbayar= item.idbayar
														jenis = 'obat'
														idjenis= obat.idobat
													) Serah
		if routeIs 'radio'
			h5 Daftar Request Radiologi
			table.bordered
				thead
					tr
						th No. MR
						th Pasien
						th Order
						th Arsip
						th Aksi
				tbody
					each pasien in pasiens
						each item in pasien.jalan
							if item.status_bayar
								if item.radio
									each radio in item.radio
										unless radio.hasil
											tr
												td= pasien.no_mr
												td= pasien.regis.nama_lengkap
												td= radio.order
												td= radio.hasil
												td
													a#request(
														pasien= pasien.no_mr
														idbayar= item.idbayar
														jenis = 'radio'
														idjenis= radio.idradio
													) Aksi

		if routeIs 'labor'
			h5 Daftar Request Labor
			table.bordered
				thead
					tr
						th No. MR
						th Pasien
						th Grup
						th Order
						th Normal
						th Satuan
						th Hasil
						th Aksi
				tbody
					each pasien in pasiens
						each item in pasien.jalan
							if item.status_bayar
								if item.labor
									each labor in item.labor
										unless labor.hasil
											tr
												td= pasien.no_mr
												td= pasien.regis.nama_lengkap
												td {{look 'orders' labor.order 'grup'}}
												td {{look 'orders' labor.order 'label'}}
												td {{look 'orders' labor.order 'normal'}}
												td {{look 'orders' labor.order 'satuan'}}
												td= labor.hasil
												td
													a#request(
														pasien= pasien.no_mr
														idbayar= item.idbayar
														jenis= 'labor'
														idjenis= labor.idlabor
													) Isi
	if currentMR
		with pasiens
			.left.purple.btn#card Cetak
			table
				tr
					th No MR
					td= no_mr
				tr
					th Nama Lengkap
					td= regis.nama_lengkap
				tr
					th Tanggal Lahir
					td= hari(regis.tgl_lahir)
				tr
					th Tempat Lahir
					td= regis.tmpt_lahir
				tr
					th Umur
					td= umur(regis.tgl_lahir)
			.right.orange.btn#close Tutup
			if jalan
				table
					thead
						tr
							th Tanggal
							th Klinik
							th Diagnosa
							th Tindakan
							th Dokter
							th Cara Bayar
							th Status Bayar
							th Lihat
					tbody
						each jalan
							tr
								td= hari(tanggal)
								td {{look 'klinik' klinik 'label'}}
								td= diagnosa
								td= tindakan
								td= dokter
								td {{look 'cara_bayar' cara_bayar 'label'}}
								td= status_bayar
								td: a.modal-trigger(href='#preview') Lihat
	with formDoc
		.modal#preview
			.modal-content
				table
					tr
						th Tanggal
						td= hari(tanggal)
						th Cara Bayar
						td {{look 'cara_bayar' cara_bayar 'label'}}
						th Klinik
						td {{look 'klinik' klinik 'label'}}
					tr
						th Diagnosa
						td= diagnosa
					tr
						th Tindakan
						td= tindakan
					tr
						th Dokter
						td= dokter
				if labor
					table
						thead
							tr
								th Grup
								th Order
								th Normal
								th Satuan
								th Hasil
						tbody
							each labor
								tr
									td {{look 'orders' order 'grup'}}
									td {{look 'orders' order 'label'}}
									td {{look 'orders' order 'normal'}}
									td {{look 'orders' order 'satuan'}}
									td= hasil
				if obat
					table
						thead
							tr
								th Nama
								th Dosis
								th Bentuk
								th Kali
								th Jumlah
						tbody
							each obat
								tr
									td {{look 'obats' nama 'label'}}
									td= aturan.dosis
									td {{look 'bentuk' aturan.bentuk 'label'}}
									td= aturan.kali
									td= jumlah
				if radio
					table
						thead
							tr
								th Order
								th Arsip
						tbody
							each radio
								tr
									td {{look 'orders_rad' order 'label'}}
									td= arsip
				with total
					table
						tr
							if labor
								th Total Labor
								td= rupiah(labor)
							if radio
								th Total Radio
								td= rupiah(radio)
							if obat
								th Total Obat
								td= rupiah(obat)
							if semua
								th Total Semua
								td= rupiah(semua)

template(name='import')
	.file-field.input-field
		.btn.left
			span Impor Data
			input(type='file' name='upload')
		.file-path-wrapper
			input.file-path.wrapper(type='text')

